<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('../partials/head')%>
        <link rel="stylesheet" href="/css/favsView.css">
</head>

<body>

    <%- include('../partials/header')%>

    <div class="deslizable">
        <a href="/user/favs"> <i class="fa-solid fa-arrow-up"></i></a>
    </div>
    <main>
        <div class="favsView-wrapper">
            <section class="user-data-container">
                <h5 class="title-favs">TUS PRODUCTOS FAVORITOS GUARDADOS</h5>
                <% let userName=user.first_name + ' ' + user.last_name %>
                <img src="/images/users/<%=user.image%>" alt="user img" id="img" style="max-width: 100px;" >
                <h1><%=userName%></h1>
                <br>
                <h4><%=user.username%></h4>
                <br>
                <h5><%=user.email%></h5>
                <h4>Cantidad de productos favs: 
                    <h5><%= products.length != 0? products.length : '"No tienes productos guardados"' %></h5>
                </h4>
            </section>
            <section class="favs-data-container">
                <% if (products) { %>
                    <% products.forEach(product => { %>
                        <article class="cardFavs">
                            <a href="/product/<%= product.id %>/detail"> <img src=/images/products/<%=product.image%> alt="img product">
                            </a>
                            <span class="icon-card-container">
                                <svg xmlns="http://www.w3.org/2000/svg" class="fav-icon" id="<%= product.id %>" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" />
                                </svg>
                            </span>
                            <span class="icon-card-container">                        
                                <svg xmlns="http://www.w3.org/2000/svg" class="share-icon" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6" id="<%= product.id %>">
                                    <path fill-rule="evenodd" d="M15.75 4.5a3 3 0 11.825 2.066l-8.421 4.679a3.002 3.002 0 010 1.51l8.421 4.679a3 3 0 11-.729 1.31l-8.421-4.678a3 3 0 110-4.132l8.421-4.679a3 3 0 01-.096-.755z" clip-rule="evenodd" />
                                </svg>
                            </span>   
                            <a href="/product/<%= product.id %>/detail">                       
                                <div class="content-art">
                                    <h3 class="p-title"><%= product.title %></h3>
                                    <p class="p-description"><%= product.description %></p>
                                    <% if(product.price > 3000) { %>
                                        <p class="send"> Envio Gratis</p>
                                    <% }; %>
                                    <% if (product.discount > 0) { %>
                                        <div class="discount">
                                            <b class="old-price">$<%= product.price %></b><b class="off"> - <%= product.discount %>% OFF</b>
                                        </div>
                                        <p class="price"> 
                                        $<%= Math.round(((product.price)* ((100 - product.discount)/100 )), -2) %>
                                        </p>
                                    <% }else{ %>
                                        <p class="price"> 
                                            $<%=product.price%>
                                        </p>
                                    <% } %>
                                </div>
                            </a> 
                        </article>
                    <% }); %>
                <% } %>
            </section>
        </div>
    </main>



    <script>

    </script>



    <!---------------------------------  FOOTER ---------------------------- -->

    <footer>
        <%- include('../partials/footer')%>
    </footer>


    <script src="/javascript/validationFront/updateProfile.js"></script>


</body>

</html>